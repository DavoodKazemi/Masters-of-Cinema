
@model AddListViewModel

@*Display a limited number of the movies that contains the search term*@
@if (Model.suggestMovies.Count() > 0)
    @foreach (var item in Model.suggestMovies)
    {
        <li class="clist-found" id="@item.Id" onclick="AddMovie(@item.Id)">
            @item.MovieTitleYear
            <span class="clist-suggestion-dir"> — @item.MovieDirector</span>
        </li>

    }else
    {
        <li class="clist-not-found" id="">
            Your search - @Model.SearchTerm - did not match any movies.
            Try different keywords.
        </li>
    }



<script>

    function revealPosts2() {
        var posts = $('.ajax-individual-item-wrapper:not(.reveal)');
        var el = posts[i];
        $(el).addClass('reveal');
    }



    //Clicks the movies to add it to this list
    function AddMovie(id) {
        //If the movie is not added already
        if ($("." + id).length == 0) {
            var data = "movieIdToAdd=" + id;
            console.log(data);

            $.ajax({
                type: 'GET',
                url: '/Account/AddMovieToCList',
                contentType: 'application/x-www-form-urlencoded; charset=UTF-8', // when we use .serialize() this generates the data in query string format. this needs the default contentType (default content type is: contentType: 'application/x-www-form-urlencoded; charset=UTF-8') so it is optional, you can remove it
                data: data,
                success: function (data, result) {
                    //Display the movie user clicked on
                    if (data != '') {
                        var new_div = $(data).hide();
                        $(".to-add-movies-container > .movies-to-add-bodey").append(new_div);
                        new_div.show('slow');
                    }
                    //Hide the placeholder, if it's not hidden already
                    //revealPosts2();
                    $("#empty-list-placeholder").slideUp(320);

                    console.log(result);
                },
                error: function () {
                    console.log('Failed ');
                }
            })

        }
        //if the movie is already added
        else {
            console.log("you already added this movie!");
        }
    }


</script>

